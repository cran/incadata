<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Erik Bulow" />

<meta name="date" content="2017-07-28" />

<title>incadata</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">incadata</h1>
<h4 class="author"><em>Erik Bulow</em></h4>
<h4 class="date"><em>2017-07-28</em></h4>



<div id="background" class="section level1">
<h1>Background</h1>
<p>Working with data from INCA or Rockan can sometimes be a pain! Not only are some formats strange (such as Boolean and dates), but sometimes the formats also differ internally in INCA or after export to work locally. The <code>incadata</code> package is aimed to streamline the process of reading and using RCC data (mostly from INCA, hence the name, but also from Rockan).</p>
</div>
<div id="example-data" class="section level1">
<h1>Example data</h1>
<p>This vignette will use some example data <code>ex_data</code> found in the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">suppressPackageStartupMessages</span>(<span class="kw">library</span>(dplyr))
<span class="kw">library</span>(incadata)</code></pre></div>
<pre><code>## 
## Attaching package: 'incadata'</code></pre>
<pre><code>## The following object is masked from 'package:dplyr':
## 
##     id</code></pre>
<pre><code>## The following object is masked from 'package:stats':
## 
##     filter</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(ex_data)</code></pre></div>
<pre><code>## [1] 497 433</code></pre>
<p>It’s a data set with many columns with all types of synthetic INCA-data (it is based on real INCA but everything is randomized and scrambled not to give any details about real patients, doctors, hospitals et cetera).</p>
<p>Le’s here chose a subset of columns just for illustrative purpose:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>
<span class="st">  </span>ex_data %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(
    a_lkf,
    a_inrappdatum,
    a_inrappsjh,
    a_inrappklk, 
    a_kompl,
    a_rappSjHemSj_Beskrivning
  )</code></pre></div>
<p>Now, how are these variables stored?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(x)</code></pre></div>
<pre><code>## Observations: 497
## Variables: 6
## $ a_lkf                     &lt;chr&gt; &quot;148101&quot;, &quot;078021&quot;, &quot;058019&quot;, &quot;14420...
## $ a_inrappdatum             &lt;chr&gt; &quot;1985-08-06&quot;, &quot;1986-03-15&quot;, &quot;1987-08...
## $ a_inrappsjh               &lt;chr&gt; &quot;51320&quot;, &quot;65016&quot;, &quot;521058&quot;, &quot;42328&quot;,...
## $ a_inrappklk               &lt;chr&gt; &quot;571&quot;, &quot;056&quot;, &quot;951&quot;, &quot;290&quot;, &quot;009&quot;, &quot;...
## $ a_kompl                   &lt;fctr&gt; , , , , , , , , , , , , , , , , , ,...
## $ a_rappSjHemSj_Beskrivning &lt;fctr&gt; Nej, Nej, Nej, Nej, Ja, Ja, Nej, Ne...</code></pre>
<p>We can see that:</p>
<ul>
<li><code>a_inrappdatum</code> looks like a date but is treated as character</li>
<li><code>a_lkf</code>, <code>a_inrappsjh</code> and <code>a_inrappklk</code> both look like numbers but are characters</li>
<li><code>a_kompl</code> looks like a Boolean but is a factor</li>
<li><code>a_rappSjHemSj_Beskrivning</code> looks like a factor and is … a factor :-)</li>
</ul>
<p>We now want to change these formats to get something more natural.</p>
</div>
<div id="function-as.incadata" class="section level1">
<h1>Function as.incadata</h1>
<p>The package has two main functions and one of them is <code>as.incadata</code>. It can take either a single vector, or a data frame and it converts its input to a format more relevant for RCC data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x2 &lt;-<span class="st"> </span><span class="kw">as.incadata</span>(x)</code></pre></div>
<pre><code>## Factors coerced to character: a_rappsjhemsj_beskrivning</code></pre>
<pre><code>## The following variables have new formats: 
## * a_inrappdatum (character -&gt; Date)
## * a_inrappsjh   (character -&gt; integer)
## * a_kompl       (factor -&gt; logical)</code></pre>
<pre><code>## Warning: a_lkf -&gt; a_lkf_lan_beskrivning: transformed to match the keyvalue:  Only the first 2 characters are used.</code></pre>
<pre><code>## Warning: a_lkf -&gt; a_lkf_kommun_beskrivning: transformed to match the keyvalue:  Only the first 4 characters are used.</code></pre>
<pre><code>## Warning: a_lkf -&gt; a_lkf_hemort_beskrivning: Some codes could not be translated (41 cells)</code></pre>
<pre><code>## New decoded columns added: 
## * a_lkf_lan_beskrivning
## * a_lkf_kommun_beskrivning
## * a_lkf_forsamling_beskrivning
## * a_lkf_hemort2_beskrivning
## * a_lkf_hemort_beskrivning</code></pre>
<pre><code>## rownames used as id!</code></pre>
<p>The output message is quite verbose. This is intended since it is probably a good idea to check that all columns are coerced to reasonable formats.</p>
<p>Let’s have a closer look at the result:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(x2)</code></pre></div>
<pre><code>## Observations: 497
## Variables: 12
## $ a_lkf                        &lt;chr&gt; &quot;148101&quot;, &quot;078021&quot;, &quot;058019&quot;, &quot;14...
## $ a_inrappdatum                &lt;date&gt; 1985-08-06, 1986-03-15, 1987-08-...
## $ a_inrappsjh                  &lt;int&gt; 51320, 65016, 521058, 42328, 4110...
## $ a_inrappklk                  &lt;chr&gt; &quot;571&quot;, &quot;056&quot;, &quot;951&quot;, &quot;290&quot;, &quot;009&quot;...
## $ a_kompl                      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, N...
## $ a_rappsjhemsj_beskrivning    &lt;chr&gt; &quot;Nej&quot;, &quot;Nej&quot;, &quot;Nej&quot;, &quot;Nej&quot;, &quot;Ja&quot;,...
## $ a_lkf_lan_beskrivning        &lt;chr&gt; &quot;Västra Götalands län&quot;, &quot;Kronober...
## $ a_lkf_kommun_beskrivning     &lt;chr&gt; &quot;Mölndal&quot;, &quot;Växjö&quot;, &quot;Linköping&quot;, ...
## $ a_lkf_forsamling_beskrivning &lt;chr&gt; &quot;Fässberg&quot;, &quot;Söraby&quot;, &quot;Vreta klos...
## $ a_lkf_hemort2_beskrivning    &lt;chr&gt; &quot;Fässberg&quot;, &quot;Söraby&quot;, &quot;Vreta klos...
## $ a_lkf_hemort_beskrivning     &lt;chr&gt; &quot;Fässberg&quot;, &quot;Söraby&quot;, &quot;Vreta klos...
## $ id                           &lt;chr&gt; &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;...</code></pre>
<p>Some things have happened:</p>
<ul>
<li>All variable names are transformed to lower case since these are generally easier to work with (note especially <code>a_rappSjHemSj_Beskrivning</code> -&gt; <code>a_rappsjhemsj_beskrivning</code>). If two (or more) variable names differ only with regard to case, this will be handled adequately.</li>
<li><code>a_inrappdatum</code> is now a date! To recognise dates, especially from Rockan, but sometimes also from INCA is a chapter on its own (think of days or months = “00” and “Y-m-d” dates mixed with two digit year ciobined with week numbers such as “7403” et cetera). We dig deeper into that issue in a separate vignette found by: <code>vignette(&quot;rccdates&quot;)</code>.</li>
<li>Some numeric variables are now numeric but some are (still) treated as character. The problem with some INCA unit codes is that a leading zero might bear meaning. To treat such a variable as numeric would drop the zero and the codes would be messed up. <code>as.codedata</code> knows about this and only treat numbers with non-leading zeroes as numeric (it also distinguish between integers and decimal numbers and it translates the Swedish decimal coma to an English decimal point since some RCC variables are stored that way).</li>
<li><code>a_kompl</code> is now Boolean and this will happen regardless if we work on INCA (where Boolean are stored as 0/1 or locally where the same values are transformed to “True” or blanks).</li>
<li>There is a new <code>id</code> column pointing to individual patients. This variable will be based on either personal identification number, patient id or a simple row number. The idea is that this variable have different names depending on the source (INCA/Rockan) and it is easier to always have an id column with the same name. Also if a personal identification number is included in the data, this will be checked (see the <code>sweidnumbr</code> package for more info), while the id column will not.</li>
<li>There are some new columns names <code>a_lkf_xxx_beskrivning</code>. These are all based on the fact that <code>a_lkf</code> is a code variable recognized by the <code>decoder</code> package.</li>
<li>There are no factor variables! Factor variables can sometimes be useful but most of the time they are just disturbing. We therefore chose to avoid them by default.</li>
</ul>
</div>
<div id="function-use_incadata" class="section level1">
<h1>Function use_incadata</h1>
<p>The other main function from the packe is <code>use_incadata</code>. It could be thought of as <code>read.incadata</code> but it is constructed to work also on INCA (where the data is already available in a data frame named “df” and therefore not read from disk).</p>
<p>This function has three main advantages:</p>
<ol style="list-style-type: decimal">
<li>It can (in contrast to <code>read.csv2</code> or similair) be used both locally and in INCA so there is no need to have different scripts for development and production.</li>
<li>It uses a cache mechanism to increase speed. If the data set is big, the use of <code>as.incadata</code> might be slow. With the use of <code>use_incadata</code> instead of first loading the data, and to always transform it (by <code>as.incadata</code>), speed might increase. If the original data file is changed (a new export from INCA), the cache will be updated automatically after comparing of MD5 check sums. (The whole caching mechanism is obviously ignored if working on INCA, where the data should always be fresh).</li>
<li>Also, as noted above, the output from <code>as.incadata</code> is quite verbose (for good reason) but if using the same data over and over again, it might not be meaningful to re-read the messages every time, which <code>use_incadata</code> does not.</li>
</ol>
<div id="example" class="section level2">
<h2>Example</h2>
<p>Let’s use an example with the same data as above. We save the data to disk as a csv2-file to simulate an exported INCA file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Save data as csv2 in temp file</span>
fl &lt;-<span class="st"> </span><span class="kw">tempfile</span>(<span class="st">&quot;ex_data&quot;</span>, <span class="dt">fileext =</span> <span class="st">&quot;.csv2&quot;</span>)
<span class="kw">write.csv2</span>(incadata::ex_data, fl, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Let us now use the data for the “first time”. The process will be verbose (but we omit it here just to save space). Here the cache file will be saved to our temporary directory since that’s where we store our data. When working locally, the cache will be saved next to the original file (from where it can be copied or removed as a regular file). We also time the process to compare the speed with later attempt:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(
  x &lt;-<span class="st"> </span><span class="kw">use_incadata</span>(fl)
)</code></pre></div>
<pre><code>## The following variables have new formats: 
## * a_inrappdatum                (character -&gt; Date)
## * a_inrappsjh                  (character -&gt; integer)
## * a_kompl                      (character -&gt; logical)
## * age                          (character -&gt; integer)
## * a_rappsjhemsj_varde          (character -&gt; integer)
## * sjukhuskod                   (character -&gt; integer)
## * a_ifylldat                   (character -&gt; Date)
## * a_diadat                     (character -&gt; Date)
## * a_diagrund_varde             (character -&gt; integer)
## * a_prepnummer                 (character -&gt; integer)
## * a_prepregar                  (character -&gt; integer)
## * a_morfrefpat_varde           (character -&gt; integer)
## * a_patcytefterlabkod          (character -&gt; integer)
## * a_prepeftergraregar          (character -&gt; integer)
## * a_primop_varde               (character -&gt; integer)
## * a_enhprimopsjhkod            (character -&gt; integer)
## * a_remannansjukv_varde        (character -&gt; integer)
## * a_annansjvremstallds         (character -&gt; integer)
## * avgmark_value                (character -&gt; integer)
## * avliddat                     (character -&gt; Date)
## * avregistreringsdatum         (character -&gt; Date)
## * fodelsedatum                 (character -&gt; Date)
## * forsamling_value             (character -&gt; integer)
## * kommun_value                 (character -&gt; integer)
## * landskod_nr                  (character -&gt; integer)
## * lkf_value                    (character -&gt; integer)
## * lopnr                        (character -&gt; integer)
## * makulerad                    (character -&gt; logical)
## * navetdatum                   (character -&gt; Date)
## * p_inrappdat                  (character -&gt; Date)
## * p_inrappenhsjhkod            (character -&gt; integer)
## * fakevar_datcervixbiop        (character -&gt; Date)
## * fakevar_datpadcervix         (character -&gt; Date)
## * fakevar_datkon               (character -&gt; Date)
## * fakevar_datpadsvarkon        (character -&gt; Date)
## * p_datpadprimkir              (character -&gt; Date)
## * p_kompl                      (character -&gt; logical)
## * p_primkirurgi_varde          (character -&gt; integer)
## * fakevar_morfverposlym_varde  (character -&gt; integer)
## * fakevar_samplaorta_varde     (character -&gt; integer)
## * p_antpelvkort                (character -&gt; integer)
## * p_antpospelvkort             (character -&gt; integer)
## * p_ant_paraortkort            (character -&gt; integer)
## * p_antposparaort              (character -&gt; integer)
## * p_metastaser_varde           (character -&gt; integer)
## * p_metaparam                  (character -&gt; logical)
## * p_metaadnexa                 (character -&gt; logical)
## * p_metavaginaovre             (character -&gt; logical)
## * p_metavaginaned              (character -&gt; logical)
## * p_metapelvlymf               (character -&gt; logical)
## * p_metalever                  (character -&gt; logical)
## * p_metalunga                  (character -&gt; logical)
## * p_metahjarna                 (character -&gt; logical)
## * p_metaskel                   (character -&gt; logical)
## * p_metaandra                  (character -&gt; logical)
## * p_diffgradwho_varde          (character -&gt; integer)
## * p_datbehbeslut               (character -&gt; Date)
## * p_petctkon_varde             (character -&gt; integer)
## * p_petctcystoskopi_varde      (character -&gt; integer)
## * p_petctlungrtg_varde         (character -&gt; integer)
## * p_petctctthorax_varde        (character -&gt; integer)
## * p_petcturografi_varde        (character -&gt; integer)
## * p_petctcturografi_varde      (character -&gt; integer)
## * p_petctctbuk_varde           (character -&gt; integer)
## * p_petctmr_varde              (character -&gt; integer)
## * p_petctpetct_varde           (character -&gt; integer)
## * p_cervixscredelt_varde       (character -&gt; integer)
## * p_primbehenlvpr_varde        (character -&gt; integer)
## * p_primbehklinstudie_varde    (character -&gt; integer)
## * p_mdk_varde                  (character -&gt; integer)
## * fakevar_behint_varde         (character -&gt; integer)
## * fakevar_givenprimbeha_varde  (character -&gt; integer)
## * fakevar_sekvens_varde        (character -&gt; integer)
## * fakevar_sekvens0_varde       (character -&gt; integer)
## * fakevar_sekvens1_varde       (character -&gt; integer)
## * fakevar_sekvens2_varde       (character -&gt; integer)
## * fakevar_sekvens3_varde       (character -&gt; integer)
## * p_behmodannan_varde          (character -&gt; integer)
## * fakevar_sekvens4_varde       (character -&gt; integer)
## * p_datstartickekirbeh         (character -&gt; Date)
## * fakevar_funkstat_varde       (character -&gt; integer)
## * p_orsnedsfunstatinfk_varde   (character -&gt; integer)
## * p_sjkstatforebeh_varde       (character -&gt; integer)
## * p_datstartkt                 (character -&gt; Date)
## * p_antcykneoadjkt             (character -&gt; integer)
## * p_mitosetop                  (character -&gt; logical)
## * p_mitospakli                 (character -&gt; logical)
## * p_mitosannan                 (character -&gt; logical)
## * fakevar_bleom                (character -&gt; logical)
## * p_cytotepir                  (character -&gt; logical)
## * p_ovrcisp                    (character -&gt; logical)
## * p_ovrkarbo                   (character -&gt; logical)
## * p_ktadmintraven              (character -&gt; logical)
## * p_ktplanregimfullf_varde     (character -&gt; integer)
## * p_ktorsakplanregejfu_varde   (character -&gt; integer)
## * fakevar_behevalneoadj_varde  (character -&gt; integer)
## * fakevar_datrespbed           (character -&gt; Date)
## * fakevar_tumorresponse_varde  (character -&gt; integer)
## * fakevar_palpnark             (character -&gt; logical)
## * fakevar_rontgen              (character -&gt; logical)
## * fakevar_ct                   (character -&gt; logical)
## * fakevar_mr                   (character -&gt; logical)
## * fakevar_pet                  (character -&gt; logical)
## * fakevar_ktrt_varde           (character -&gt; integer)
## * fakevar_datstartkt           (character -&gt; Date)
## * p_krtantcykler               (character -&gt; integer)
## * fakevar_datavslkt            (character -&gt; Date)
## * fakevar_karboplatin          (character -&gt; logical)
## * fakevar_peros                (character -&gt; logical)
## * fakevar_intranervost         (character -&gt; logical)
## * fakevar_planregfull_varde    (character -&gt; integer)
## * fakevar_ktregimejfull_varde  (character -&gt; integer)
## * fakevar_datstartkt2          (character -&gt; Date)
## * p_aktantalcykler             (character -&gt; integer)
## * fakevar_datavslkt2           (character -&gt; Date)
## * fakevar_ifosfamid2           (character -&gt; logical)
## * fakevar_etoposid2            (character -&gt; logical)
## * fakevar_paklitaxel           (character -&gt; logical)
## * fakevar_epirubicin2          (character -&gt; logical)
## * fakevar_cislpatin            (character -&gt; logical)
## * fakevar_karboplatinak        (character -&gt; logical)
## * fakevar_topotekan2           (character -&gt; logical)
## * fakevar_intravenost2         (character -&gt; logical)
## * fakevar_planregfullf_varde   (character -&gt; integer)
## * fakevar_ktregimejfull0_varde (character -&gt; integer)
## * fakevar_datavslbt            (character -&gt; Date)
## * fakevar_malomrade_varde      (character -&gt; integer)
## * fakevar_applring             (character -&gt; logical)
## * cervex_ovoider               (character -&gt; logical)
## * fakevar_intrauterin          (character -&gt; logical)
## * fakevar_dosrat_varde         (character -&gt; integer)
## * fakevar_dosplbaspa_varde     (character -&gt; integer)
## * p_slutdosbttot               (character -&gt; integer)
## * p_slutdosbtantfrak           (character -&gt; integer)
## * p_btplanregfullf_varde       (character -&gt; integer)
## * p_btplanregejfullf_varde     (character -&gt; integer)
## * p_datstartrt                 (character -&gt; Date)
## * fakevar_lymfkortelmet        (character -&gt; logical)
## * fakevar_tumorresekt          (character -&gt; logical)
## * fakevar_snavamarginal        (character -&gt; logical)
## * fakevar_karlinvaxt           (character -&gt; logical)
## * fakevar_aggresivhist         (character -&gt; logical)
## * p_rtindstr23                 (character -&gt; logical)
## * fakevar_stroma               (character -&gt; logical)
## * p_rtindts                    (character -&gt; logical)
## * fakevar_annatind             (character -&gt; logical)
## * p_rtsnavmarginalbred         (character -&gt; integer)
## * fakevar_tumorpelstat         (character -&gt; logical)
## * fakevar_boost                (character -&gt; logical)
## * fakevar_boostpelvina         (character -&gt; logical)
## * fakevar_malomrade2           (character -&gt; logical)
## * fakevar_paraaortala          (character -&gt; logical)
## * fakevar_annatmalomr          (character -&gt; logical)
## * fakevar_radmed_varde         (character -&gt; integer)
## * fakevar_fotoner              (character -&gt; logical)
## * fakevar_protoner             (character -&gt; logical)
## * fakevar_imrt                 (character -&gt; logical)
## * p_slutdosmalomr1             (character -&gt; numeric)
## * p_slutdosmalomr2             (character -&gt; numeric)
## * p_slutdosmalomr3             (character -&gt; numeric)
## * p_slutdosmalomr4             (character -&gt; numeric)
## * p_slutdosparaaortlgl         (character -&gt; numeric)
## * fakevar_planstralfull_varde  (character -&gt; integer)
## * fakevar_planregejfull_varde  (character -&gt; integer)
## * p_annanprimbeh_varde         (character -&gt; integer)
## * p_behevalefter_varde         (character -&gt; integer)
## * p_datresponsbed              (character -&gt; Date)
## * fakevar_funkstat1_varde      (character -&gt; integer)
## * fakevar_evalavser_varde      (character -&gt; integer)
## * p_bedefterprimbeh_varde      (character -&gt; integer)
## * p_palputannark               (character -&gt; logical)
## * p_palpinark                  (character -&gt; logical)
## * fakevar_responsbedct         (character -&gt; logical)
## * fakevar_respbed              (character -&gt; logical)
## * p_petct                      (character -&gt; logical)
## * fakevar_datstartbt           (character -&gt; Date)
## * regdatum                     (character -&gt; Date)
## * sekretess_value              (character -&gt; integer)
## * u_inrappdat                  (character -&gt; Date)
## * u_inrappenhsjhkod            (character -&gt; integer)
## * u_kompl                      (character -&gt; logical)
## * u_datuppf                    (character -&gt; Date)
## * u_sjukdomsstat_varde         (character -&gt; integer)
## * u_nastaklinkont_varde        (character -&gt; integer)
## * u_enhnastaklinkontk          (character -&gt; integer)
## * u_enhnastaklinkontj          (character -&gt; integer)
## * u_omantalman                 (character -&gt; integer)
## * u_dodsdat                    (character -&gt; Date)
## * u_dodsorsak_varde            (character -&gt; integer)
## * u_datreci                    (character -&gt; Date)
## * vitalstatus                  (character -&gt; integer)
## * vitalstatusdatum             (character -&gt; Date)
## * vitalstatusdatum_estimat     (character -&gt; Date)
## * a_snomed                     (character -&gt; integer)
## * a_gynonkenhremsjh            (character -&gt; integer)</code></pre>
<pre><code>## New decoded columns added: 
## * a_lkf_forsamling_beskrivning
## * a_lkf_lan_beskrivning
## * a_lkf_kommun_beskrivning
## * a_lkf_hemort2_beskrivning
## * a_lkf_hemort_beskrivning
## * kon_value_kon_beskrivning
## * lan_value_lan_beskrivning
## * lan_value_hemort2_beskrivning
## * lkf_value_kommun_beskrivning
## * lkf_value_hemort_beskrivning
## * lkf_value_forsamling_beskrivning
## * lkf_value_hemort2_beskrivning
## * lkf_value_lan_beskrivning</code></pre>
<pre><code>## pat_id used as id!</code></pre>
<pre><code>## Cache file saved: /var/folders/dd/z0l8zzy51jv48ywmfrv8yqt40000gp/T//Rtmpmto6Gg/ex_data573530b795b0.csv2.rds</code></pre>
<pre><code>##    user  system elapsed 
##   1.172   0.012   1.187</code></pre>
<p>Now, let’s assume that we for some reason has to restart the process all over again (and let´s time it again for the sake of comparison):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(
  x &lt;-<span class="st"> </span><span class="kw">use_incadata</span>(fl)
)</code></pre></div>
<pre><code>## Use cached file created 2017-07-28 14:39:37</code></pre>
<pre><code>##    user  system elapsed 
##   0.033   0.000   0.035</code></pre>
<p>Voila! Data is already in a good format and process was therefore faster than before!</p>
</div>
</div>
<div id="additional-functions" class="section level1">
<h1>Additional functions</h1>
<p>Additional functions from the package are found by <code>help(package = &quot;incadata&quot;)</code>. We do for example include som dplyr-verb wrappers just to maintain some attributes and to get pretty printing of objects.</p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
